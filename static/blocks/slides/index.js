// Generated by LiveScript 1.3.0
module.exports = {
  handle: {
    change: function(node, blocks){
      var slides, ref$;
      slides = btools.qsAll('.slides .slide', node);
      slides.map(function(it){
        var ref$;
        return ref$ = it.style, ref$.zIndex = 0, ref$.opacity = 0, ref$.transition = 'none', ref$.transform = "translate(0,0)", ref$;
      });
      return ref$ = slides[(node.blockSlides || (node.blockSlides = {})).idx || 0].style, ref$.zIndex = 9, ref$.opacity = 1, ref$;
    }
  },
  wrap: function(block){
    var move;
    if (block.inited) {
      return;
    }
    block.inited = true;
    block.blockSlides = {
      idx: 0
    };
    move = function(dir){
      var slides, len, transition, oldidx, idx, ref$;
      slides = btools.qsAll('.slides .slide', block);
      len = slides.length;
      transition = "all .3s ease-in-out";
      oldidx = block.blockSlides.idx;
      idx = len > 1 ? (oldidx + dir + len * 2) % len : 0;
      ref$ = block.blockSlides;
      ref$.idx = idx;
      ref$.oldidx = oldidx;
      if (idx === oldidx) {
        return;
      }
      ref$ = slides[oldidx].style;
      ref$.transition = 'none';
      ref$.zIndex = 9;
      ref$.opacity = 1;
      ref$.transform = "translate(0,0)";
      ref$ = slides[idx].style;
      ref$.transition = 'none';
      ref$.zIndex = 0;
      ref$.opacity = 0;
      ref$.transform = "translate(" + 100 * -dir + "%,0)";
      return setTimeout(function(){
        var ref$;
        ref$ = slides[oldidx].style;
        ref$.transition = transition;
        ref$.zIndex = 0;
        ref$.opacity = 0;
        ref$.transform = "translate(" + 100 * dir + "%,0)";
        return ref$ = slides[idx].style, ref$.transition = transition, ref$.zIndex = 9, ref$.opacity = 1, ref$.transform = "translate(0,0)", ref$;
      }, 0);
    };
    block.addEventListener('click', function(e){
      var target;
      target = e.target;
      while (target && target.classList) {
        if (target.classList.contains('fa-chevron-right')) {
          return move(-1);
        } else if (target.classList.contains('fa-chevron-left')) {
          return move(1);
        }
        target = target.parentNode;
      }
    });
    document.body.addEventListener('keydown', function(e){
      if (e.target === document.body) {
        if (e.keyCode === 37) {
          return move(-1);
        } else if (e.keyCode === 39) {
          return move(1);
        }
      }
    });
    return btools.qs('.slides > .slide', block).map(function(it){
      var ref$;
      return ref$ = it.style, ref$.opacity = 1, ref$.zIndex = 9, ref$;
    });
  }
};