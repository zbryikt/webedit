{"html":"<div editable=\"false\" repeat-host=\"repeat-host\" class=\"thumbs\"><div image=\"image\" repeat-item=\"repeat-item\" style=\"background-image:url(/assets/img/sample/1.jpg\" class=\"thumb\"><div class=\"inner\"></div></div><div image=\"image\" repeat-item=\"repeat-item\" style=\"background-image:url(/assets/img/sample/2.jpg\" class=\"thumb\"><div class=\"inner\"></div></div><div image=\"image\" repeat-item=\"repeat-item\" style=\"background-image:url(/assets/img/sample/3.jpg\" class=\"thumb\"><div class=\"inner\"></div></div><div image=\"image\" repeat-item=\"repeat-item\" style=\"background-image:url(/assets/img/sample/4.jpg\" class=\"thumb\"><div class=\"inner\"></div></div><div image=\"image\" repeat-item=\"repeat-item\" style=\"background-image:url(/assets/img/sample/5.jpg\" class=\"thumb\"><div class=\"inner\"></div></div><div image=\"image\" repeat-item=\"repeat-item\" style=\"background-image:url(/assets/img/sample/6.jpg\" class=\"thumb\"><div class=\"inner\"></div></div><div image=\"image\" repeat-item=\"repeat-item\" style=\"background-image:url(/assets/img/sample/7.jpg\" class=\"thumb\"><div class=\"inner\"></div></div><div image=\"image\" repeat-item=\"repeat-item\" style=\"background-image:url(/assets/img/sample/8.jpg\" class=\"thumb\"><div class=\"inner\"></div></div></div>","css":".block-gallery .thumbs {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: stretch;\n}\n.block-gallery .thumb {\n  flex: 1 1 auto;\n  min-width: 140px;\n  width: 20%;\n  background-color: #eee;\n  margin: 1px;\n}\n.block-gallery .thumb .inner {\n  width: 100%;\n  padding-bottom: 75%;\n  height: 0;\n}\n.modal-block-gallery .modal-dialog {\n  max-width: 90vw;\n}\n.modal-block-gallery .modal-content {\n  background: none;\n  border: 0;\n}\n.modal-block-gallery .modal-content .inner {\n  width: 100%;\n  height: 90vh;\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: center center;\n}\n.page-viewer .block-gallery .thumb {\n  transition: none !important;\n}\n","js":"// Generated by LiveScript 1.3.0\nmodule.exports = {\n  editable: false,\n  change: function(){\n    var this$ = this;\n    clearTimeout(this.handle);\n    return this.handle = setTimeout(function(){\n      return this$.balance();\n    }, 10);\n  },\n  balance: function(){\n    var hash, key, list, max, vote, res$, k, v, height, results$ = [];\n    hash = {};\n    btools.qsAll('.thumb', this.block).map(function(it){\n      var box, key;\n      box = it.getBoundingClientRect();\n      key = Math.round(box.y);\n      return (hash[key] || (hash[key] = [])).push([it, box.height]);\n    });\n    for (key in hash) {\n      list = hash[key];\n      max = Math.max.apply(null, list.map(fn$));\n      vote = {};\n      list.map(fn1$);\n      res$ = [];\n      for (k in vote) {\n        v = vote[k];\n        res$.push([k, v]);\n      }\n      vote = res$;\n      vote.sort(fn2$);\n      height = vote[0][0];\n      results$.push(list.map(fn3$));\n    }\n    return results$;\n    function fn$(it){\n      return it[1];\n    }\n    function fn1$(it){\n      var that;\n      return vote[it[1]] = ((that = vote[it[1]]) ? that : 0) + 1;\n    }\n    function fn2$(a, b){\n      return a[1] - b[1];\n    }\n    function fn3$(it){\n      return it[0].style.height = height + \"px\";\n    }\n  },\n  init: function(){\n    var root, dialog, content, inner;\n    if (!this.viewMode) {\n      return;\n    }\n    this.balance();\n    this.block.addEventListener('click', function(e){\n      var target, img;\n      if (!e.target || !e.target.classList) {\n        return;\n      }\n      target = e.target;\n      while (target && target.classList) {\n        if (target.classList.contains('thumb')) {\n          break;\n        }\n        target = target.parentNode;\n      }\n      if (!target.classList.contains('thumb')) {\n        return;\n      }\n      img = target.style.backgroundImage;\n      return btools.qs(\".modal-block-gallery\").map(function(modal){\n        var content;\n        $(modal).modal('show');\n        content = modal.querySelector('.modal-content > div');\n        return content.style.backgroundImage = img;\n      });\n    });\n    if (document.querySelector(\".modal-block-gallery\")) {\n      return;\n    }\n    root = document.createElement(\"div\");\n    root.setAttribute('class', \"modal fade modal-block-gallery\");\n    dialog = document.createElement(\"div\");\n    dialog.setAttribute('class', \"modal-dialog modal-dialog-centered\");\n    content = document.createElement(\"div\");\n    content.setAttribute('class', \"modal-content\");\n    inner = document.createElement(\"div\");\n    inner.setAttribute('class', 'inner');\n    root.appendChild(dialog);\n    dialog.appendChild(content);\n    content.appendChild(inner);\n    document.body.appendChild(root);\n    return root.addEventListener('click', function(){\n      return $(root).modal('hide');\n    });\n  }\n};"}