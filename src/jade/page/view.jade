//- view
doctype html
html
  include /mixins/index.jade
  head
    +css("/css/pack/viewer.css")
    +script("/js/pack/viewer.js")
    script.
    +css("/blocks/all.min.css")
    +script("/js/pack/viewer.js")
    +script("/blocks/all.js")
    script.
      var blockTypes = !{'[' + data.child.map(function(it) { return '"' + it.type + '"'; }).join(',') + ']'};
  body
    #root(style="margin:auto;width:1024px")
      each block in data.child
        .block-item(id="block-id#{$index}", class="block-" + block.type,base-block=block.type)
          .inner!= block.content
  a#makeweb.ld.ld-bounce(href="/") #[span Powered By] #[img(src="/assets/img/logo.svg")]
  a#edit-this-page(href="./") #[i.fa.fa-edit] Edit This Page
  script.
    Array.from(document.querySelectorAll('[contenteditable=true]')).map(function(it) {
      it.setAttribute('contenteditable', false);
    });
    blocksManager.code.loadLibrary(blockTypes);
    blocksManager.code.wrap(document.querySelectorAll('#root > .block-item'))
